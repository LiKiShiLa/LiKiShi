<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ™¨æ™é›»è…¦ï½œåˆ†æœŸè©¦ç®—ç¸½è¦½</title>
<style>
  body{
    font-family: Arial, sans-serif;
    background:#f5f7fa;
    padding:20px;
    margin:0;
    color:#111;
  }
  .wrap{ max-width: 1100px; margin: 0 auto; }

  /* Brand header */
  .brand {
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    padding:14px 16px;
    background:#111;
    border-radius:14px;
    box-shadow: 0 6px 16px rgba(0,0,0,.12);
    margin-bottom:16px;
  }
  .brand-left{
    display:flex;
    align-items:center;
    gap:14px;
    min-width:0;
  }
  .brand img{
    height:56px;
    width:auto;
    border-radius:10px;
    display:block;
    background:#000;
  }
  .brand-title{
    color:#fff;
    font-weight:800;
    font-size:18px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .brand-sub{
    color:#cbd5e1;
    font-size:12px;
    margin-top:2px;
  }
  .brand-actions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .btn{
    border:0;
    border-radius:10px;
    padding:10px 12px;
    font-size:14px;
    cursor:pointer;
    background:#2563eb;
    color:#fff;
  }
  .btn:active{ transform: translateY(1px); }
  .btn.secondary{ background:#334155; }
  .btn.ghost{
    background: transparent;
    border:1px solid rgba(255,255,255,.25);
  }

  .input-area{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:center;
    flex-wrap:wrap;
    margin: 14px 0 20px;
  }
  input{
    padding:10px 12px;
    font-size:16px;
    width:220px;
    border-radius:10px;
    border:1px solid #cbd5e1;
    outline:none;
  }
  .hint{
    text-align:center;
    font-size:13px;
    color:#475569;
    margin-bottom: 10px;
  }

  .cards{
    display:flex;
    gap:18px;
    flex-wrap:wrap;
    justify-content:center;
  }
  .card{
    background:#fff;
    border-radius:14px;
    width:520px;
    box-shadow:0 6px 16px rgba(0,0,0,0.08);
    overflow:hidden;
  }
  .card-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding:14px 16px;
    background:#eef2f7;
  }
  .card-header a{
    font-size:16px;
    font-weight:800;
    color:#0f172a;
    text-decoration:none;
  }
  .card-header a:hover{ text-decoration:underline; }
  .card-header .small-actions{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .small-actions button{
    padding:8px 10px;
    font-size:13px;
    border-radius:10px;
  }

  table{ width:100%; border-collapse:collapse; }
  th, td{
    padding:10px 10px;
    border-bottom:1px solid #eef2f7;
    text-align:right;
    font-size:14px;
  }
  th{
    background:#fafafa;
    font-size:13px;
    color:#334155;
  }
  td:first-child, th:first-child{ text-align:center; }
  td:last-child, th:last-child{ text-align:center; width:110px; }

  .highlight{ background:#fff8e1; font-weight:800; }

  .copy-btn{
    border:0;
    background:#0ea5e9;
    color:#fff;
    border-radius:10px;
    padding:8px 10px;
    cursor:pointer;
    font-size:13px;
    white-space:nowrap;
  }
  .copy-btn.secondary{ background:#64748b; }

  .toast{
    position:fixed;
    left:50%;
    bottom:18px;
    transform:translateX(-50%);
    background:#111;
    color:#fff;
    padding:10px 14px;
    border-radius:999px;
    font-size:13px;
    opacity:0;
    pointer-events:none;
    transition:opacity .2s ease;
  }
  .toast.show{ opacity:1; }

  @media (max-width: 600px){
    .card{ width: 100%; }
    input{ width: 100%; max-width: 320px; }
    .brand{ flex-direction:column; align-items:stretch; }
    .brand-actions{ justify-content:stretch; }
    .brand-actions .btn{ width:100%; }
  }
/* å³ä¸‹è§’æµ®æ°´å°ç°½å */
.signature-wrap{
  position: fixed;
  right: 14px;
  bottom: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 1;          /* æ•´é«”é€æ˜åº¦ï¼ˆé—œéµï¼‰ */
  pointer-events: none;  /* ä¸å½±éŸ¿é»æ“Š */
  user-select: none;     /* ä¸å¯é¸å– */
  z-index: 999;
}

.signature-wrap img{
  width: 36px;
  height: auto;
  filter: grayscale(100%); /* è®Šæˆç°éšæ›´åƒæµ®æ°´å° */
}

.signature-text{
  font-size: 12px;
  line-height: 1.35;
  text-align: right;
  color: #000;
  white-space: nowrap;
}

.signature-text .version{
  font-size: 11px;
}

</style>
</head>
<body>
<div class="wrap">

  <!-- ä½ çš„å“ç‰Œå€ï¼ˆæŠŠ brand-logo.jpg æ”¾åœ¨åŒè³‡æ–™å¤¾å³å¯é¡¯ç¤ºï¼‰ -->
  <div class="brand">
    <div class="brand-left">
      <img src="brand-logo.jpg" alt="æ™¨æ™é›»è…¦ Logo">
      <div>
        <div class="brand-title">æ™¨æ™é›»è…¦ï½œåˆ†æœŸè©¦ç®—ç¸½è¦½</div>
        <div class="brand-sub">è¼¸å…¥é‡‘é¡å¾Œï¼Œä¸€æ¬¡æ”¤é–‹å„å¹³å°æ‰€æœ‰æœŸæ•¸ï¼Œä¸¦å¯ä¸€éµè¤‡è£½å ±åƒ¹</div>
      </div>
    </div>
    <div class="brand-actions">
      <button class="btn secondary" onclick="copyAllQuotes()">ğŸ“‹ è¤‡è£½å…¨éƒ¨å ±åƒ¹</button>
      <button class="btn ghost" onclick="scrollToTop()">â¬†ï¸ å›åˆ°ä¸Šæ–¹</button>
    </div>
  </div>

  <div class="input-area">
    <span style="font-weight:800;">é‡‘é¡ï¼š</span>
    <input type="number" id="price" placeholder="è¼¸å…¥é‡‘é¡ï¼ˆä¾‹å¦‚ 30000ï¼‰">
    <button class="btn" onclick="calculate()">è¨ˆç®—</button>
  </div>
  <div class="hint">æç¤ºï¼š6 / 12 / 24 æœŸå·²ç‰¹åˆ¥æ¨™ç¤ºï¼Œå³å´æŒ‰ ğŸ“‹ å¯ç›´æ¥è¤‡è£½è©²æœŸå ±åƒ¹æ–‡å­—ã€‚</div>

  <div class="cards" id="output"></div>

</div>

<div class="toast" id="toast">å·²è¤‡è£½</div>

<script>
const data = {
  "ç¶ ç•Œç§‘æŠ€": {
    link: "https://vendor.ecpay.com.tw/User/LogOn_Step1",
    rates: { 1: 0.03, 3: 0.035, 6: 0.05, 12: 0.08, 18: 0.12, 24: 0.14 }
  },
  "éŠ€è§’åˆ†æœŸ": {
    link: "https://www.ezfund.com.tw/EC0card/Home/Login?url=/EC0card",
    rates: { 6: 0.0425, 9: 0.06, 12: 0.075, 18: 0.11, 24: 0.14 }
  }
};

function fmt(n){
  // å››æ¨äº”å…¥ + åƒåˆ†ä½
  const v = Math.round(Number(n));
  return v.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}
function fmtRate(r){
  // é¡¯ç¤ºç™¾åˆ†æ¯”ï¼Œæœ€å¤šå…©ä½å°æ•¸ï¼ˆ4.25% é€™ç¨®ï¼‰
  return (r * 100).toFixed(2).replace(/\.00$/, "") + "%";
}
function periodLabel(p){
  return (Number(p) === 1) ? "ä¸€æ¬¡ä»˜æ¸…" : `${p}æœŸ`;
}

function showToast(msg="å·²è¤‡è£½"){
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"), 1200);
}

async function copyText(text){
  try{
    await navigator.clipboard.writeText(text);
    showToast("âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
  }catch(e){
    // fallback
    const ta = document.createElement("textarea");
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand("copy");
    document.body.removeChild(ta);
    showToast("âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
  }
}

function buildRowQuote({price, platform, period, rate, total, per}){
  const pLabel = periodLabel(period);
  // ä½ å¯ä»¥è‡ªç”±æ”¹æˆä½ é–€å¸‚ç¿’æ…£çš„æ–‡å­—æ ¼å¼
  return [
    `ã€æ™¨æ™é›»è…¦ åˆ†æœŸå ±åƒ¹ã€‘`,
    `å¹³å°ï¼š${platform}`,
    `æ–¹æ¡ˆï¼š${pLabel}ï¼ˆæ‰‹çºŒè²» ${fmtRate(rate)}ï¼‰`,
    `åŸåƒ¹ï¼š$${fmt(price)}`,
    `åˆ†æœŸç¸½åƒ¹ï¼š$${fmt(total)}`,
    `æ¯æœŸï¼šç´„ $${fmt(per)}`,
  ].join("\n");
}

function buildPlatformQuote({price, platform, rates}){
  let lines = [];
  lines.push(`ã€æ™¨æ™é›»è…¦ åˆ†æœŸå ±åƒ¹ã€‘`);
  lines.push(`å¹³å°ï¼š${platform}`);
  lines.push(`åŸåƒ¹ï¼š$${fmt(price)}`);
  lines.push(`----------------------`);
  for (const period in rates){
    const rate = rates[period];
    const total = price * (1 + rate);
    const per = (Number(period) === 1) ? total : total / Number(period);
    lines.push(`${periodLabel(period)}ï½œæ‰‹çºŒè²» ${fmtRate(rate)}ï½œç¸½åƒ¹ $${fmt(total)}ï½œæ¯æœŸ $${fmt(per)}`);
  }
  return lines.join("\n");
}

function calculate(){
  const price = Number(document.getElementById("price").value);
  if (!price || price <= 0){
    showToast("è«‹å…ˆè¼¸å…¥é‡‘é¡");
    return;
  }

  let html = "";

  for (const platform in data){
    const { link, rates } = data[platform];

    html += `
      <div class="card">
        <div class="card-header">
          <a href="${link}" target="_blank">ğŸ”— ${platform}ï¼ˆé»æˆ‘ç™»å…¥ï¼‰</a>
          <div class="small-actions">
            <button class="btn secondary" onclick="copyPlatform('${platform}')">ğŸ“‹ è¤‡è£½å¹³å°å ±åƒ¹</button>
          </div>
        </div>

        <table>
          <tr>
            <th>æœŸæ•¸</th>
            <th>æ‰‹çºŒè²»</th>
            <th>ç¸½åƒ¹</th>
            <th>æ¯æœŸ</th>
            <th>è¤‡è£½</th>
          </tr>
    `;

    for (const period in rates){
      const rate = rates[period];
      const total = price * (1 + rate);
      const per = (Number(period) === 1) ? total : total / Number(period);
      const highlight = [6,12,24].includes(Number(period)) ? "highlight" : "";

      const quote = buildRowQuote({ price, platform, period, rate, total, per })
        .replaceAll("\n", "\\n")
        .replaceAll("'", "\\'");

      html += `
        <tr class="${highlight}">
          <td>${periodLabel(period)}</td>
          <td>${fmtRate(rate)}</td>
          <td>$${fmt(total)}</td>
          <td>$${fmt(per)}</td>
          <td>
            <button class="copy-btn" onclick="copyText('${quote}')">ğŸ“‹ è¤‡è£½</button>
          </td>
        </tr>
      `;
    }

    html += `
        </table>
      </div>
    `;
  }

  document.getElementById("output").innerHTML = html;
}

function copyPlatform(platform){
  const price = Number(document.getElementById("price").value);
  if (!price || price <= 0){
    showToast("è«‹å…ˆè¼¸å…¥é‡‘é¡");
    return;
  }
  const text = buildPlatformQuote({ price, platform, rates: data[platform].rates });
  copyText(text);
}

function copyAllQuotes(){
  const price = Number(document.getElementById("price").value);
  if (!price || price <= 0){
    showToast("è«‹å…ˆè¼¸å…¥é‡‘é¡");
    return;
  }
  let blocks = [];
  for (const platform in data){
    blocks.push(buildPlatformQuote({ price, platform, rates: data[platform].rates }));
    blocks.push(""); // ç©ºè¡Œåˆ†éš”
  }
  copyText(blocks.join("\n"));
}

function scrollToTop(){ window.scrollTo({top:0, behavior:"smooth"}); }
</script>

<div class="signature-wrap">
  <img src="brand-logo.jpg" alt="æ™¨æ™é›»è…¦ Logo">
  <div class="signature-text">
    æ™¨æ™é›»è…¦_ç†Šå°ˆæ¥­åœ‹éš›è³‡è¨Šæœ‰é™å…¬å¸
 Â©<br>
    è¦æ ¼é€æ˜ï¼Œåƒ¹æ ¼æ¸…æ¥š<br>
    <span class="version">v1.0.0</span>
  </div>
</div>
</body>
</html>
